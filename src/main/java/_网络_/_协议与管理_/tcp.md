

TCP/IP
传输控制协议 因特网互联协议
协议栈 （协议集合）

TCP/IP 分层

    应用层
    传输层
    互联网层
    网络接口层（物理 + 数据链路）
    
    对应OSI 7层模型
    
    TCP 应用层 协议 （ftp tftp nfs emtp snm 。。。。 nginx 阿帕奇 等应用 层 协议 ）
    
    
TCP/IP 和OSI 

    相同点：
        以协议栈为基础
        协议独立
        下层对上层提供服务
    
    不同：
        OSI 现有模型 后又协议
        TCP /IP 相反
        OSI是标准
        TCP 是 只用域 TCP/IP
        
        
TCP / UDP （ 传输层 协议）

    TCP                UDP
    可靠               高效
    (保证数据 是否 送到) （不用确认 ，我只发送 ， 速度快）
    面向连接           非 面向
    有次序             无次序
    （文件 邮件 下载） （语音 视频）
    
    
传输层
TCP 头格式

    4 + 4 + 4 + 4 + 12个 填充
    
    源端口 目标端口 （标识 应用）
        端口规则：
            0 - 1023 特权端口 只有管理员可以使用
            永久的给固定 系统应用适应
            
            1024-49151 用户端口 你自己用
            
            49151 - 65535 动态 或私有 客户端随机使用
            
    序号  
        标识 数据包序号 第几个第几个
        
    确认号
        确认收到 标号
        
    数据偏移 保留 [URG ACK RST SYN(连接) FIN(分手)] 窗口    
        头长（4字节 还可加 40个字节 可变长度 头）  保留不用  [六个标记位 标识 当前 工作状态 ， TCP连接 标识]
        
        
    校验和     紧急指针
    
    选项（长度不固定） + 填充
   
    
    
TCP 面向 连接

建立连接

    三次握手
        SYC-SENDT发送 SUN =1 SEQ = X
        SUN-RCVD接受发送 SYN =1 ACk = 1 SEQ = Y ACk = X+1
        SYC-SENDT接受发送 ACK = 1 SEQ = X+1 ACK = Y+1
        ESTAB-LISHED建立连接        
        
    四次挥手
    

        
    
    
    
    
    
    